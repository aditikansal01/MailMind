<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>MailMind - Working Solution</title>
  <link rel="stylesheet" href="/styles.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      color: #333;
      line-height: 1.6;
      padding: 20px;
      position: relative;
      overflow-x: hidden;
    }

    /* Enhanced animated background with multiple layers */
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1000"><defs><radialGradient id="g" cx="50%" cy="50%" r="50%"><stop stop-color="rgba(255,255,255,0.1)" offset="0%"/><stop stop-color="rgba(255,255,255,0)" offset="100%"/></radialGradient></defs><circle cx="200" cy="200" r="3" fill="url(%23g)"/><circle cx="800" cy="300" r="2" fill="url(%23g)"/><circle cx="400" cy="600" r="4" fill="url(%23g)"/><circle cx="600" cy="800" r="2" fill="url(%23g)"/><circle cx="100" cy="700" r="3" fill="url(%23g)"/><circle cx="900" cy="100" r="2" fill="url(%23g)"/></svg>') repeat;
      animation: float-particles 20s linear infinite;
      pointer-events: none;
      z-index: 0;
    }

    body::after {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                  radial-gradient(circle at 80% 20%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
                  radial-gradient(circle at 40% 40%, rgba(79, 70, 229, 0.1) 0%, transparent 50%);
      animation: glow-shift 8s ease-in-out infinite;
      pointer-events: none;
      z-index: 0;
    }

    @keyframes float-particles {
      0% { transform: translateY(0px) rotate(0deg); }
      100% { transform: translateY(-100px) rotate(360deg); }
    }

    @keyframes glow-shift {
      0%, 100% { opacity: 0.7; transform: scale(1) rotate(0deg); }
      50% { opacity: 1; transform: scale(1.05) rotate(180deg); }
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      border-radius: 20px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      position: relative;
      z-index: 1;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .container::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 2px;
      background: linear-gradient(90deg, 
        transparent,
        rgba(79, 70, 229, 0.5),
        rgba(124, 58, 237, 0.5),
        transparent
      );
      animation: shimmer 2s ease-in-out infinite;
    }

    @keyframes shimmer {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }

    .header {
      background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
      color: white;
      text-align: center;
      padding: 40px 20px;
      position: relative;
      overflow: hidden;
    }

    .header::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
      animation: float 6s ease-in-out infinite;
    }

    .header::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(45deg, 
        transparent 30%, 
        rgba(255, 255, 255, 0.1) 50%, 
        transparent 70%
      );
      animation: sweep 3s ease-in-out infinite;
    }

    @keyframes float {
      0%, 100% { transform: translate(-20px, -20px) rotate(0deg); }
      50% { transform: translate(20px, 20px) rotate(180deg); }
    }

    @keyframes sweep {
      0% { transform: translateX(-100%) skewX(-15deg); }
      100% { transform: translateX(100%) skewX(-15deg); }
    }

    .header h1 {
      font-size: 3rem;
      font-weight: 700;
      margin-bottom: 10px;
      position: relative;
      z-index: 1;
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      animation: glow-title 2s ease-in-out infinite alternate;
    }

    @keyframes glow-title {
      0% { text-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); }
      100% { text-shadow: 0 2px 20px rgba(255, 255, 255, 0.2); }
    }

    .header p {
      font-size: 1.2rem;
      opacity: 0.9;
      position: relative;
      z-index: 1;
    }

    .content {
      padding: 40px;
    }

    .card {
      background: white;
      border-radius: 16px;
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
      border: 1px solid rgba(0, 0, 0, 0.05);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .card:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 35px rgba(0, 0, 0, 0.12);
    }

    /* Typing animation for header */
    .typing-effect {
      border-right: 2px solid rgba(255, 255, 255, 0.7);
      animation: typing 3s steps(30, end), blink 0.5s step-end infinite alternate;
    }

    @keyframes typing {
      from { width: 0; }
      to { width: 100%; }
    }

    @keyframes blink {
      50% { border-color: transparent; }
    }
    
    /* Enhance card entrance animations */
    .card-enter {
      animation: cardEnter 0.6s ease-out forwards;
      opacity: 0;
      transform: translateY(20px);
    }

    @keyframes cardEnter {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Gradient text effect */
    .gradient-text {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .button {
      background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 12px;
      font-size: 1rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      margin: 8px;
      min-width: 180px;
      position: relative;
      overflow: hidden;
      transform: perspective(1px) translateZ(0);
    }

    .button::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.2) 0%, transparent 100%);
      transform: translateX(-100%);
      transition: transform 0.6s ease;
    }

    .button:hover::before {
      transform: translateX(100%);
    }

    .button:hover {
      transform: translateY(-3px) scale(1.02);
      box-shadow: 0 12px 25px rgba(79, 70, 229, 0.4);
    }

    .button:active {
      transform: translateY(-1px) scale(0.98);
      transition: all 0.1s ease;
    }

    .button:disabled {
      background: #9ca3af;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }

    .button:disabled::before {
      display: none;
    }

    .button.secondary {
      background: linear-gradient(135deg, #6b7280 0%, #9ca3af 100%);
    }

    .button.secondary:hover {
      box-shadow: 0 8px 20px rgba(107, 114, 128, 0.3);
    }

    .button.success {
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    }

    .button.success:hover {
      box-shadow: 0 8px 20px rgba(16, 185, 129, 0.3);
    }

    .user-info {
      background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
      padding: 20px;
      border-radius: 12px;
      border-left: 5px solid #22c55e;
      margin-bottom: 20px;
    }

    .user-info h2 {
      color: #15803d;
      margin-bottom: 10px;
      font-size: 1.5rem;
    }

    .button-group {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
      margin: 20px 0;
    }

    .fade-in {
      animation: fadeIn 0.5s ease-in;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Enhanced loading animations */
    .loading-spinner {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      border-top-color: #fff;
      animation: spin 1s ease-in-out infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .pulse-dot {
      display: inline-block;
      width: 8px;
      height: 8px;
      background: #10b981;
      border-radius: 50%;
      margin-right: 8px;
      animation: pulse-glow 2s ease-in-out infinite;
    }

    @keyframes pulse-glow {
      0%, 100% { 
        opacity: 1; 
        box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7);
      }
      50% { 
        opacity: 0.7; 
        box-shadow: 0 0 0 10px rgba(16, 185, 129, 0);
      }
    }

    .status-indicator {
      display: inline-flex;
      align-items: center;
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 0.875rem;
      font-weight: 500;
      margin: 8px 0;
    }

    .status-indicator.success {
      background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
      color: #15803d;
      border: 1px solid #86efac;
    }

    .status-indicator.loading {
      background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
      color: #1d4ed8;
      border: 1px solid #93c5fd;
    }

    .status-indicator.error {
      background: linear-gradient(135deg, #fef2f2 0%, #fecaca 100%);
      color: #dc2626;
      border: 1px solid #fca5a5;
    }

    /* Notification toast styles */
    .toast {
      position: fixed;
      top: 20px;
      right: 20px;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-radius: 12px;
      padding: 16px 20px;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
      border: 1px solid rgba(255, 255, 255, 0.2);
      z-index: 1000;
      animation: slide-in 0.3s ease-out;
    }

    @keyframes slide-in {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }

    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
      40% { transform: translateY(-10px); }
      60% { transform: translateY(-5px); }
    }
    
    @keyframes slide-out {
      to { transform: translateX(100%); opacity: 0; }
    }
    
    .email-snippet {
      transition: all 0.3s ease;
      cursor: pointer;
    }
    
    .email-snippet:hover {
      color: #4f46e5;
    }

    /* Floating action button styles */
    .fab {
      position: fixed;
      bottom: 30px;
      right: 30px;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
      color: white;
      border: none;
      font-size: 24px;
      cursor: pointer;
      box-shadow: 0 8px 25px rgba(79, 70, 229, 0.3);
      transition: all 0.3s ease;
      z-index: 100;
      display: none;
    }

    .fab:hover {
      transform: scale(1.1);
      box-shadow: 0 12px 35px rgba(79, 70, 229, 0.4);
    }

    .fab.show {
      display: block;
      animation: bounce-in 0.5s ease-out;
    }

    @keyframes bounce-in {
      0% { transform: scale(0) rotate(180deg); }
      50% { transform: scale(1.2) rotate(90deg); }
      100% { transform: scale(1) rotate(0deg); }
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      border-radius: 20px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      position: relative;
      z-index: 1;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .container::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 2px;
      background: linear-gradient(90deg, 
        transparent,
        rgba(79, 70, 229, 0.5),
        rgba(124, 58, 237, 0.5),
        transparent
      );
      animation: shimmer 2s ease-in-out infinite;
    }

    @keyframes shimmer {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }

    .header {
      background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
      color: white;
      text-align: center;
      padding: 40px 20px;
      position: relative;
      overflow: hidden;
    }

    .header::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
      animation: float 6s ease-in-out infinite;
    }

    .header::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(45deg, 
        transparent 30%, 
        rgba(255, 255, 255, 0.1) 50%, 
        transparent 70%
      );
      animation: sweep 3s ease-in-out infinite;
    }

    @keyframes float {
      0%, 100% { transform: translate(-20px, -20px) rotate(0deg); }
      50% { transform: translate(20px, 20px) rotate(180deg); }
    }

    @keyframes sweep {
      0% { transform: translateX(-100%) skewX(-15deg); }
      100% { transform: translateX(100%) skewX(-15deg); }
    }

    .header h1 {
      font-size: 3rem;
      font-weight: 700;
      margin-bottom: 10px;
      position: relative;
      z-index: 1;
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      animation: glow-title 2s ease-in-out infinite alternate;
    }

    @keyframes glow-title {
      0% { text-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); }
      100% { text-shadow: 0 2px 20px rgba(255, 255, 255, 0.2); }
    }

    .header p {
      font-size: 1.2rem;
      opacity: 0.9;
      position: relative;
      z-index: 1;
    }

    .content {
      padding: 40px;
    }

    .card {
      background: white;
      border-radius: 16px;
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
      border: 1px solid rgba(0, 0, 0, 0.05);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .card:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 35px rgba(0, 0, 0, 0.12);
    }

    /* Typing animation for header */
    .typing-effect {
      border-right: 2px solid rgba(255, 255, 255, 0.7);
      animation: typing 3s steps(30, end), blink 0.5s step-end infinite alternate;
    }

    @keyframes typing {
      from { width: 0; }
      to { width: 100%; }
    }

    @keyframes blink {
      50% { border-color: transparent; }
    }
    
    /* Enhance card entrance animations */
    .card-enter {
      animation: cardEnter 0.6s ease-out forwards;
      opacity: 0;
      transform: translateY(20px);
    }

    @keyframes cardEnter {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Gradient text effect */
    .gradient-text {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .button {
      background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 12px;
      font-size: 1rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      margin: 8px;
      min-width: 180px;
      position: relative;
      overflow: hidden;
      transform: perspective(1px) translateZ(0);
    }

    .button::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.2) 0%, transparent 100%);
      transform: translateX(-100%);
      transition: transform 0.6s ease;
    }

    .button:hover::before {
      transform: translateX(100%);
    }

    .button:hover {
      transform: translateY(-3px) scale(1.02);
      box-shadow: 0 12px 25px rgba(79, 70, 229, 0.4);
    }

    .button:active {
      transform: translateY(-1px) scale(0.98);
      transition: all 0.1s ease;
    }

    .button:disabled {
      background: #9ca3af;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }

    .button:disabled::before {
      display: none;
    }

    .button.secondary {
      background: linear-gradient(135deg, #6b7280 0%, #9ca3af 100%);
    }

    .button.secondary:hover {
      box-shadow: 0 8px 20px rgba(107, 114, 128, 0.3);
    }

    .button.success {
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    }

    .button.success:hover {
      box-shadow: 0 8px 20px rgba(16, 185, 129, 0.3);
    }

    .user-info {
      background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
      padding: 20px;
      border-radius: 12px;
      border-left: 5px solid #22c55e;
      margin-bottom: 20px;
    }

    .user-info h2 {
      color: #15803d;
      margin-bottom: 10px;
      font-size: 1.5rem;
    }

    .button-group {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
      margin: 20px 0;
    }

    .fade-in {
      animation: fadeIn 0.5s ease-in;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Enhanced loading animations */
    .loading-spinner {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      border-top-color: #fff;
      animation: spin 1s ease-in-out infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .pulse-dot {
      display: inline-block;
      width: 8px;
      height: 8px;
      background: #10b981;
      border-radius: 50%;
      margin-right: 8px;
      animation: pulse-glow 2s ease-in-out infinite;
    }

    @keyframes pulse-glow {
      0%, 100% { 
        opacity: 1; 
        box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7);
      }
      50% { 
        opacity: 0.7; 
        box-shadow: 0 0 0 10px rgba(16, 185, 129, 0);
      }
    }

    .status-indicator {
      display: inline-flex;
      align-items: center;
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 0.875rem;
      font-weight: 500;
      margin: 8px 0;
    }

    .status-indicator.success {
      background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
      color: #15803d;
      border: 1px solid #86efac;
    }

    .status-indicator.loading {
      background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
      color: #1d4ed8;
      border: 1px solid #93c5fd;
    }

    .status-indicator.error {
      background: linear-gradient(135deg, #fef2f2 0%, #fecaca 100%);
      color: #dc2626;
      border: 1px solid #fca5a5;
    }

    /* Notification toast styles */
    .toast {
      position: fixed;
      top: 20px;
      right: 20px;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-radius: 12px;
      padding: 16px 20px;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
      border: 1px solid rgba(255, 255, 255, 0.2);
      z-index: 1000;
      animation: slide-in 0.3s ease-out;
    }

    @keyframes slide-in {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }

    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
      40% { transform: translateY(-10px); }
      60% { transform: translateY(-5px); }
    }
    
    @keyframes slide-out {
      to { transform: translateX(100%); opacity: 0; }
    }
    
    .email-snippet {
      transition: all 0.3s ease;
      cursor: pointer;
    }
    
    .email-snippet:hover {
      color: #4f46e5;
    }

    /* Floating action button styles */
    .fab {
      position: fixed;
      bottom: 30px;
      right: 30px;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
      color: white;
      border: none;
      font-size: 24px;
      cursor: pointer;
      box-shadow: 0 8px 25px rgba(79, 70, 229, 0.3);
      transition: all 0.3s ease;
      z-index: 100;
      display: none;
    }

    .fab:hover {
      transform: scale(1.1);
      box-shadow: 0 12px 35px rgba(79, 70, 229, 0.4);
    }

    .fab.show {
      display: block;
      animation: bounce-in 0.5s ease-out;
    }

    @keyframes bounce-in {
      0% { transform: scale(0) rotate(180deg); }
      50% { transform: scale(1.2) rotate(90deg); }
      100% { transform: scale(1) rotate(0deg); }
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      border-radius: 20px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      position: relative;
      z-index: 1;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .container::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 2px;
      background: linear-gradient(90deg, 
        transparent,
        rgba(79, 70, 229, 0.5),
        rgba(124, 58, 237, 0.5),
        transparent
      );
      animation: shimmer 2s ease-in-out infinite;
    }

    @keyframes shimmer {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }

    .header {
      background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
      color: white;
      text-align: center;
      padding: 40px 20px;
      position: relative;
      overflow: hidden;
    }

    .header::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
      animation: float 6s ease-in-out infinite;
    }

    .header::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(45deg, 
        transparent 30%, 
        rgba(255, 255, 255, 0.1) 50%, 
        transparent 70%
      );
      animation: sweep 3s ease-in-out infinite;
    }

    @keyframes float {
      0%, 100% { transform: translate(-20px, -20px) rotate(0deg); }
      50% { transform: translate(20px, 20px) rotate(180deg); }
    }

    @keyframes sweep {
      0% { transform: translateX(-100%) skewX(-15deg); }
      100% { transform: translateX(100%) skewX(-15deg); }
    }

    .header h1 {
      font-size: 3rem;
      font-weight: 700;
      margin-bottom: 10px;
      position: relative;
      z-index: 1;
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      animation: glow-title 2s ease-in-out infinite alternate;
    }

    @keyframes glow-title {
      0% { text-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); }
      100% { text-shadow: 0 2px 20px rgba(255, 255, 255, 0.2); }
    }

    .header p {
      font-size: 1.2rem;
      opacity: 0.9;
      position: relative;
      z-index: 1;
    }

    .content {
      padding: 40px;
    }

    .card {
      background: white;
      border-radius: 16px;
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
      border: 1px solid rgba(0, 0, 0, 0.05);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .card:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 35px rgba(0, 0, 0, 0.12);
    }

    /* Typing animation for header */
    .typing-effect {
      border-right: 2px solid rgba(255, 255, 255, 0.7);
      animation: typing 3s steps(30, end), blink 0.5s step-end infinite alternate;
    }

    @keyframes typing {
      from { width: 0; }
      to { width: 100%; }
    }

    @keyframes blink {
      50% { border-color: transparent; }
    }
    
    /* Enhance card entrance animations */
    .card-enter {
      animation: cardEnter 0.6s ease-out forwards;
      opacity: 0;
      transform: translateY(20px);
    }

    @keyframes cardEnter {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Gradient text effect */
    .gradient-text {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .button {
      background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 12px;
      font-size: 1rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      margin: 8px;
      min-width: 180px;
      position: relative;
      overflow: hidden;
      transform: perspective(1px) translateZ(0);
    }

    .button::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.2) 0%, transparent 100%);
      transform: translateX(-100%);
      transition: transform 0.6s ease;
    }

    .button:hover::before {
      transform: translateX(100%);
    }

    .button:hover {
      transform: translateY(-3px) scale(1.02);
      box-shadow: 0 12px 25px rgba(79, 70, 229, 0.4);
    }

    .button:active {
      transform: translateY(-1px) scale(0.98);
      transition: all 0.1s ease;
    }

    .button:disabled {
      background: #9ca3af;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }

    .button:disabled::before {
      display: none;
    }

    .button.secondary {
      background: linear-gradient(135deg, #6b7280 0%, #9ca3af 100%);
    }

    .button.secondary:hover {
      box-shadow: 0 8px 20px rgba(107, 114, 128, 0.3);
    }

    .button.success {
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    }

    .button.success:hover {
      box-shadow: 0 8px 20px rgba(16, 185, 129, 0.3);
    }

    .user-info {
      background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
      padding: 20px;
      border-radius: 12px;
      border-left: 5px solid #22c55e;
      margin-bottom: 20px;
    }

    .user-info h2 {
      color: #15803d;
      margin-bottom: 10px;
      font-size: 1.5rem;
    }

    .button-group {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
      margin: 20px 0;
    }

    .fade-in {
      animation: fadeIn 0.5s ease-in;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Enhanced loading animations */
    .loading-spinner {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      border-top-color: #fff;
      animation: spin 1s ease-in-out infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .pulse-dot {
      display: inline-block;
      width: 8px;
      height: 8px;
      background: #10b981;
      border-radius: 50%;
      margin-right: 8px;
      animation: pulse-glow 2s ease-in-out infinite;
    }

    @keyframes pulse-glow {
      0%, 100% { 
        opacity: 1; 
        box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7);
      }
      50% { 
        opacity: 0.7; 
        box-shadow: 0 0 0 10px rgba(16, 185, 129, 0);
      }
    }

    .status-indicator {
      display: inline-flex;
      align-items: center;
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 0.875rem;
      font-weight: 500;
      margin: 8px 0;
    }

    .status-indicator.success {
      background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
      color: #15803d;
      border: 1px solid #86efac;
    }

    .status-indicator.loading {
      background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
      color: #1d4ed8;
      border: 1px solid #93c5fd;
    }

    .status-indicator.error {
      background: linear-gradient(135deg, #fef2f2 0%, #fecaca 100%);
      color: #dc2626;
      border: 1px solid #fca5a5;
    }

    /* Notification toast styles */
    .toast {
      position: fixed;
      top: 20px;
      right: 20px;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-radius: 12px;
      padding: 16px 20px;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
      border: 1px solid rgba(255, 255, 255, 0.2);
      z-index: 1000;
      animation: slide-in 0.3s ease-out;
    }

    @keyframes slide-in {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }

    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
      40% { transform: translateY(-10px); }
      60% { transform: translateY(-5px); }
    }
    
    @keyframes slide-out {
      to { transform: translateX(100%); opacity: 0; }
    }
    
    .email-snippet {
      transition: all 0.3s ease;
      cursor: pointer;
    }
    
    .email-snippet:hover {
      color: #4f46e5;
    }

    /* Floating action button styles */
    .fab {
      position: fixed;
      bottom: 30px;
      right: 30px;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
      color: white;
      border: none;
      font-size: 24px;
      cursor: pointer;
      box-shadow: 0 8px 25px rgba(79, 70, 229, 0.3);
      transition: all 0.3s ease;
      z-index: 100;
      display: none;
    }

    .fab:hover {
      transform: scale(1.1);
      box-shadow: 0 12px 35px rgba(79, 70, 229, 0.4);
    }

    .fab.show {
      display: block;
      animation: bounce-in 0.5s ease-out;
    }

    @keyframes bounce-in {
      0% { transform: scale(0) rotate(180deg); }
      50% { transform: scale(1.2) rotate(90deg); }
      100% { transform: scale(1) rotate(0deg); }
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      border-radius: 20px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      position: relative;
      z-index: 1;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .container::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 2px;
      background: linear-gradient(90deg, 
        transparent,
        rgba(79, 70, 229, 0.5),
        rgba(124, 58, 237, 0.5),
        transparent
      );
      animation: shimmer 2s ease-in-out infinite;
    }

    @keyframes shimmer {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }

    .header {
      background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
      color: white;
      text-align: center;
      padding: 40px 20px;
      position: relative;
      overflow: hidden;
    }

    .header::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
      animation: float 6s ease-in-out infinite;
    }

    .header::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(45deg, 
        transparent 30%, 
        rgba(255, 255, 255, 0.1) 50%, 
        transparent 70%
      );
      animation: sweep 3s ease-in-out infinite;
    }

    @keyframes float {
      0%, 100% { transform: translate(-20px, -20px) rotate(0deg); }
      50% { transform: translate(20px, 20px) rotate(180deg); }
    }

    @keyframes sweep {
      0% { transform: translateX(-100%) skewX(-15deg); }
      100% { transform: translateX(100%) skewX(-15deg); }
    }

    .header h1 {
      font-size: 3rem;
      font-weight: 700;
      margin-bottom: 10px;
      position: relative;
      z-index: 1;
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      animation: glow-title 2s ease-in-out infinite alternate;
    }

    @keyframes glow-title {
      0% { text-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); }
      100% { text-shadow: 0 2px 20px rgba(255, 255, 255, 0.2); }
    }

    .header p {
      font-size: 1.2rem;
      opacity: 0.9;
      position: relative;
      z-index: 1;
    }

    .content {
      padding: 40px;
    }

    .card {
      background: white;
      border-radius: 16px;
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
      border: 1px solid rgba(0, 0, 0, 0.05);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .card:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 35px rgba(0, 0, 0, 0.12);
    }

    /* Typing animation for header */
    .typing-effect {
      border-right: 2px solid rgba(255, 255, 255, 0.7);
      animation: typing 3s steps(30, end), blink 0.5s step-end infinite alternate;
    }

    @keyframes typing {
      from { width: 0; }
      to { width: 100%; }
    }

    @keyframes blink {
      50% { border-color: transparent; }
    }
    
    /* Enhance card entrance animations */
    .card-enter {
      animation: cardEnter 0.6s ease-out forwards;
      opacity: 0;
      transform: translateY(20px);
    }

    @keyframes cardEnter {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Gradient text effect */
    .gradient-text {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .button {
      background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 12px;
      font-size: 1rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      margin: 8px;
      min-width: 180px;
      position: relative;
      overflow: hidden;
      transform: perspective(1px) translateZ(0);
    }

    .button::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.2) 0%, transparent 100%);
      transform: translateX(-100%);
      transition: transform 0.6s ease;
    }

    .button:hover::before {
      transform: translateX(100%);
    }

    .button:hover {
      transform: translateY(-3px) scale(1.02);
      box-shadow: 0 12px 25px rgba(79, 70, 229, 0.4);
    }

    .button:active {
      transform: translateY(-1px) scale(0.98);
      transition: all 0.1s ease;
    }

    .button:disabled {
      background: #9ca3af;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }

    .button:disabled::before {
      display: none;
    }

    .button.secondary {
      background: linear-gradient(135deg, #6b7280 0%, #9ca3af 100%);
    }

    .button.secondary:hover {
      box-shadow: 0 8px 20px rgba(107, 114, 128, 0.3);
    }

    .button.success {
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    }

    .button.success:hover {
      box-shadow: 0 8px 20px rgba(16, 185, 129, 0.3);
    }

    .user-info {
      background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
      padding: 20px;
      border-radius: 12px;
      border-left: 5px solid #22c55e;
      margin-bottom: 20px;
    }

    .user-info h2 {
      color: #15803d;
      margin-bottom: 10px;
      font-size: 1.5rem;
    }

    .button-group {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
      margin: 20px 0;
    }

    .fade-in {
      animation: fadeIn 0.5s ease-in;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Enhanced loading animations */
    .loading-spinner {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      border-top-color: #fff;
      animation: spin 1s ease-in-out infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .pulse-dot {
      display: inline-block;
      width: 8px;
      height: 8px;
      background: #10b981;
      border-radius: 50%;
      margin-right: 8px;
      animation: pulse-glow 2s ease-in-out infinite;
    }

    @keyframes pulse-glow {
      0%, 100% { 
        opacity: 1; 
        box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7);
      }
      50% { 
        opacity: 0.7; 
        box-shadow: 0 0 0 10px rgba(16, 185, 129, 0);
      }
    }

    .status-indicator {
      display: inline-flex;
      align-items: center;
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 0.875rem;
      font-weight: 500;
      margin: 8px 0;
    }

    .status-indicator.success {
      background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
      color: #15803d;
      border: 1px solid #86efac;
    }

    .status-indicator.loading {
      background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
      color: #1d4ed8;
      border: 1px solid #93c5fd;
    }

    .status-indicator.error {
      background: linear-gradient(135deg, #fef2f2 0%, #fecaca 100%);
      color: #dc2626;
      border: 1px solid #fca5a5;
    }

    /* Notification toast styles */
    .toast {
      position: fixed;
      top: 20px;
      right: 20px;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-radius: 12px;
      padding: 16px 20px;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
      border: 1px solid rgba(255, 255, 255, 0.2);
      z-index: 1000;
      animation: slide-in 0.3s ease-out;
    }

    @keyframes slide-in {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }

    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
      40% { transform: translateY(-10px); }
      60% { transform: translateY(-5px); }
    }
    
    @keyframes slide-out {
      to { transform: translateX(100%); opacity: 0; }
    }
    
    .email-snippet {
      transition: all 0.3s ease;
      cursor: pointer;
    }
    
    .email-snippet:hover {
      color: #4f46e5;
    }

    /* Floating action button styles */
    .fab {
      position: fixed;
      bottom: 30px;
      right: 30px;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
      color: white;
      border: none;
      font-size: 24px;
      cursor: pointer;
      box-shadow: 0 8px 25px rgba(79, 70, 229, 0.3);
      transition: all 0.3s ease;
      z-index: 100;
      display: none;
    }

    .fab:hover {
      transform: scale(1.1);
      box-shadow: 0 12px 35px rgba(79, 70, 229, 0.4);
    }

    .fab.show {
      display: block;
      animation: bounce-in 0.5s ease-out;
    }

    @keyframes bounce-in {
      0% { transform: scale(0) rotate(180deg); }
      50% { transform: scale(1.2) rotate(90deg); }
      100% { transform: scale(1) rotate(0deg); }
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      border-radius: 20px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      position: relative;
      z-index: 1;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .container::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 2px;
      background: linear-gradient(90deg, 
        transparent,
        rgba(79, 70, 229, 0.5),
        rgba(124, 58, 237, 0.5),
        transparent
      );
      animation: shimmer 2s ease-in-out infinite;
    }

    @keyframes shimmer {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }

    .header {
      background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
      color: white;
      text-align: center;
      padding: 40px 20px;
      position: relative;
      overflow: hidden;
    }

    .header::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
      animation: float 6s ease-in-out infinite;
    }

    .header::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(45deg, 
        transparent 30%, 
        rgba(255, 255, 255, 0.1) 50%, 
        transparent 70%
      );
      animation: sweep 3s ease-in-out infinite;
    }

    @keyframes float {
      0%, 100% { transform: translate(-20px, -20px) rotate(0deg); }
      50% { transform: translate(20px, 20px) rotate(180deg); }
    }

    @keyframes sweep {
      0% { transform: translateX(-100%) skewX(-15deg); }
      100% { transform: translateX(100%) skewX(-15deg); }
    }

    .header h1 {
      font-size: 3rem;
      font-weight: 700;
      margin-bottom: 10px;
      position: relative;
      z-index: 1;
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      animation: glow-title 2s ease-in-out infinite alternate;
    }

    @keyframes glow-title {
      0% { text-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); }
      100% { text-shadow: 0 2px 20px rgba(255, 255, 255, 0.2); }
    }

    .header p {
      font-size: 1.2rem;
      opacity: 0.9;
      position: relative;
      z-index: 1;
    }

    .content {
      padding: 40px;
    }

    .card {
      background: white;
      border-radius: 16px;
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
      border: 1px solid rgba(0, 0, 0, 0.05);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .card:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 35px rgba(0, 0, 0, 0.12);
    }

    /* Typing animation for header */
    .typing-effect {
      border-right: 2px solid rgba(255, 255, 255, 0.7);
      animation: typing 3s steps(30, end), blink 0.5s step-end infinite alternate;
    }

    @keyframes typing {
      from { width: 0; }
      to { width: 100%; }
    }

    @keyframes blink {
      50% { border-color: transparent; }
    }
    
    /* Enhance card entrance animations */
    .card-enter {
      animation: cardEnter 0.6s ease-out forwards;
      opacity: 0;
      transform: translateY(20px);
    }

    @keyframes cardEnter {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Gradient text effect */
    .gradient-text {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .button {
      background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 12px;
      font-size: 1rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      margin: 8px;
      min-width: 180px;
      position: relative;
      overflow: hidden;
      transform: perspective(1px) translateZ(0);
    }

    .button::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.2) 0%, transparent 100%);
      transform: translateX(-100%);
      transition: transform 0.6s ease;
    }

    .button:hover::before {
      transform: translateX(100%);
    }

    .button:hover {
      transform: translateY(-3px) scale(1.02);
      box-shadow: 0 12px 25px rgba(79, 70, 229, 0.4);
    }

    .button:active {
      transform: translateY(-1px) scale(0.98);
      transition: all 0.1s ease;
    }

    .button:disabled {
      background: #9ca3af;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }

    .button:disabled::before {
      display: none;
    }

    .button.secondary {
      background: linear-gradient(135deg, #6b7280 0%, #9ca3af 100%);
    }

    .button.secondary:hover {
      box-shadow: 0 8px 20px rgba(107, 114, 128, 0.3);
    }

    .button.success {
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    }

    .button.success:hover {
      box-shadow: 0 8px 20px rgba(16, 185, 129, 0.3);
    }

    .user-info {
      background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
      padding: 20px;
      border-radius: 12px;
      border-left: 5px solid #22c55e;
      margin-bottom: 20px;
    }

    .user-info h2 {
      color: #15803d;
      margin-bottom: 10px;
      font-size: 1.5rem;
    }

    .button-group {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
      margin: 20px 0;
    }

    .fade-in {
      animation: fadeIn 0.5s ease-in;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Enhanced loading animations */
    .loading-spinner {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      border-top-color: #fff;
      animation: spin 1s ease-in-out infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .pulse-dot {
      display: inline-block;
      width: 8px;
      height: 8px;
      background: #10b981;
      border-radius: 50%;
      margin-right: 8px;
      animation: pulse-glow 2s ease-in-out infinite;
    }

    @keyframes pulse-glow {
      0%, 100% { 
        opacity: 1; 
        box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7);
      }
      50% { 
        opacity: 0.7; 
        box-shadow: 0 0 0 10px rgba(16, 185, 129, 0);
      }
    }

    .status-indicator {
      display: inline-flex;
      align-items: center;
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 0.875rem;
      font-weight: 500;
      margin: 8px 0;
    }

    .status-indicator.success {
      background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
      color: #15803d;
      border: 1px solid #86efac;
    }

    .status-indicator.loading {
      background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
      color: #1d4ed8;
      border: 1px solid #93c5fd;
    }

    .status-indicator.error {
      background: linear-gradient(135deg, #fef2f2 0%, #fecaca 100%);
      color: #dc2626;
      border: 1px solid #fca5a5;
    }

    /* Notification toast styles */
    .toast {
      position: fixed;
      top: 20px;
      right: 20px;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-radius: 12px;
      padding: 16px 20px;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
      border: 1px solid rgba(255, 255, 255, 0.2);
      z-index: 1000;
      animation: slide-in 0.3s ease-out;
    }

    @keyframes slide-in {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }

    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
      40% { transform: translateY(-10px); }
      60% { transform: translateY(-5px); }
    }
    
    @keyframes slide-out {
      to { transform: translateX(100%); opacity: 0; }
    }
    
    .email-snippet {
      transition: all 0.3s ease;
      cursor: pointer;
    }
    
    .email-snippet:hover {
      color: #4f46e5;
    }

    /* Floating action button styles */
    .fab {
      position: fixed;
      bottom: 30px;
      right: 30px;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
      color: white;
      border: none;
      font-size: 24px;
      cursor: pointer;
      box-shadow: 0 8px 25px rgba(79, 70, 229, 0.3);
      transition: all 0.3s ease;
      z-index: 100;
      display: none;
    }

    .fab:hover {
      transform: scale(1.1);
      box-shadow: 0 12px 35px rgba(79, 70, 229, 0.4);
    }

    .fab.show {
      display: block;
      animation: bounce-in 0.5s ease-out;
    }

    @keyframes bounce-in {
      0% { transform: scale(0) rotate(180deg); }
      50% { transform: scale(1.2) rotate(90deg); }
      100% { transform: scale(1) rotate(0deg); }
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      border-radius: 20px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      position: relative;
      z-index: 1;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .container::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 2px;
      background: linear-gradient(90deg, 
        transparent,
        rgba(79, 70, 229, 0.5),
        rgba(124, 58, 237, 0.5),
        transparent
      );
      animation: shimmer 2s ease-in-out infinite;
    }

    @keyframes shimmer {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }

    .header {
      background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
      color: white;
      text-align: center;
      padding: 40px 20px;
      position: relative;
      overflow: hidden;
    }

    .header::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
      animation: float 6s ease-in-out infinite;
    }

    .header::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(45deg, 
        transparent 30%, 
        rgba(255, 255, 255, 0.1) 50%, 
        transparent 70%
      );
      animation: sweep 3s ease-in-out infinite;
    }

    @keyframes float {
      0%, 100% { transform: translate(-20px, -20px) rotate(0deg); }
      50% { transform: translate(20px, 20px) rotate(180deg); }
    }

    @keyframes sweep {
      0% { transform: translateX(-100%) skewX(-15deg); }
      100% { transform: translateX(100%) skewX(-15deg); }
    }

    .header h1 {
      font-size: 3rem;
      font-weight: 700;
      margin-bottom: 10px;
      position: relative;
      z-index: 1;
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      animation: glow-title 2s ease-in-out infinite alternate;
    }

    @keyframes glow-title {
      0% { text-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); }
      100% { text-shadow: 0 2px 20px rgba(255, 255, 255, 0.2); }
    }

    .header p {
      font-size: 1.2rem;
      opacity: 0.9;
      position: relative;
      z-index: 1;
    }

    .content {
      padding: 40px;
    }

    .card {
      background: white;
      border-radius: 16px;
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
      border: 1px solid rgba(0, 0, 0, 0.05);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .card:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 35px rgba(0, 0, 0, 0.12);
    }

    /* Typing animation for header */
    .typing-effect {
      border-right: 2px solid rgba(255, 255, 255, 0.7);
      animation: typing 3s steps(30, end), blink 0.5s step-end infinite alternate;
    }

    @keyframes typing {
      from { width: 0; }
      to { width: 100%; }
    }

    @keyframes blink {
      50% { border-color: transparent; }
    }
    
    /* Enhance card entrance animations */
    .card-enter {
      animation: cardEnter 0.6s ease-out forwards;
      opacity: 0;
      transform: translateY(20px);
    }

    @keyframes cardEnter {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Gradient text effect */
    .gradient-text {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .button {
      background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 12px;
      font-size: 1rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      margin: 8px;
      min-width: 180px;
      position: relative;
      overflow: hidden;
      transform: perspective(1px) translateZ(0);
    }

    .button::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.2) 0%, transparent 100%);
      transform: translateX(-100%);
      transition: transform 0.6s ease;
    }

    .button:hover::before {
      transform: translateX(100%);
    }

    .button:hover {
      transform: translateY(-3px) scale(1.02);
      box-shadow: 0 12px 25px rgba(79, 70, 229, 0.4);
    }

    .button:active {
      transform: translateY(-1px) scale(0.98);
      transition: all 0.1s ease;
    }

    .button:disabled {
      background: #9ca3af;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }

    .button:disabled::before {
      display: none;
    }

    .button.secondary {
      background: linear-gradient(135deg, #6b7280 0%, #9ca3af 100%);
    }

    .button.secondary:hover {
      box-shadow: 0 8px 20px rgba(107, 114, 128, 0.3);
    }

    .button.success {
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    }

    .button.success:hover {
      box-shadow: 0 8px 20px rgba(16, 185, 129, 0.3);
    }

    .user-info {
      background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
      padding: 20px;
      border-radius: 12px;
      border-left: 5px solid #22c55e;
      margin-bottom: 20px;
    }

    .user-info h2 {
      color: #15803d;
      margin-bottom: 10px;
      font-size: 1.5rem;
    }

    .button-group {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
      margin: 20px 0;
    }

    .fade-in {
      animation: fadeIn 0.5s ease-in;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Enhanced loading animations */
    .loading-spinner {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      border-top-color: #fff;
      animation: spin 1s ease-in-out infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .pulse-dot {
      display: inline-block;
      width: 8px;
      height: 8px;
      background: #10b981;
      border-radius: 50%;
      margin-right: 8px;
      animation: pulse-glow 2s ease-in-out infinite;
    }

    @keyframes pulse-glow {
      0%, 100% { 
        opacity: 1; 
        box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7);
      }
      50% { 
        opacity: 0.7; 
        box-shadow: 0 0 0 10px rgba(16, 185, 129, 0);
      }
    }

    .status-indicator {
      display: inline-flex;
      align-items: center;
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 0.875rem;
      font-weight: 500;
      margin: 8px 0;
    }

    .status-indicator.success {
      background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
      color: #15803d;
      border: 1px solid #86efac;
    }

    .status-indicator.loading {
      background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
      color: #1d4ed8;
      border: 1px solid #93c5fd;
    }

    .status-indicator.error {
      background: linear-gradient(135deg, #fef2f2 0%, #fecaca 100%);
      color: #dc2626;
      border: 1px solid #fca5a5;
    }

    /* Notification toast styles */
    .toast {
      position: fixed;
      top: 20px;
      right: 20px;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-radius: 12px;
      padding: 16px 20px;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
      border: 1px solid rgba(255, 255, 255, 0.2);
      z-index: 1000;
      animation: slide-in 0.3s ease-out;
    }

    @keyframes slide-in {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }

    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
      40% { transform: translateY(-10px); }
      60% { transform: translateY(-5px); }
    }
    
    @keyframes slide-out {
      to { transform: translateX(100%); opacity: 0; }
    }
    
    .email-snippet {
      transition: all 0.3s ease;
      cursor: pointer;
    }
    
    .email-snippet:hover {
      color: #4f46e5;
    }

    /* Floating action button styles */
    .fab {
      position: fixed;
      bottom: 30px;
      right: 30px;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
      color: white;
      border: none;
      font-size: 24px;
      cursor: pointer;
      box-shadow: 0 8px 25px rgba(79, 70, 229, 0.3);
      transition: all 0.3s ease;
      z-index: 100;
      display: none;
    }

    .fab:hover {
      transform: scale(1.1);
      box-shadow: 0 12px 35px rgba(79, 70, 229, 0.4);
    }

    .fab.show {
      display: block;
      animation: bounce-in 0.5s ease-out;
    }

    @keyframes bounce-in {
      0% { transform: scale(0) rotate(180deg); }
      50% { transform: scale(1.2) rotate(90deg); }
      100% { transform: scale(1) rotate(0deg); }
    }

    /* OAuth Info Section */
    .oauth-info {
      background: linear-gradient(135deg, #fef3c7 0%, #fed7aa 100%);
      border-left: 5px solid #f59e0b;
      padding: 20px;
      border-radius: 12px;
      margin-bottom: 20px;
    }

    .oauth-info h3 {
      color: #92400e;
      margin-bottom: 15px;
      font-size: 1.2rem;
    }

    .oauth-info p {
      color: #a16207;
      font-size: 0.9rem;
      line-height: 1.5;
      margin-bottom: 10px;
    }
  </style>
</head>
<body>
  <div class="container fade-in">
    <div class="header">
      <h1> MailMind</h1>
      <p>Smart Gmail Management</p>
    </div>
    
    <div class="content">
      <!-- Welcome Section -->
      <div class="card" style="text-align: center; background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%); border-left: 5px solid #0ea5e9;">
        <h2 style="color: #0369a1; margin-bottom: 15px; font-size: 1.6rem;"> Welcome to MailMind</h2>
        <p style="color: #0284c7; font-size: 1.1rem; margin-bottom: 15px;">Smart email management made simple</p>
        <p style="color: #0369a1; font-size: 0.95rem; line-height: 1.5;">Connect your Gmail and get intelligent insights about your inbox. Stay organized and never miss what's important.</p>
      </div>
      
      <!-- Login Section -->
      <div class="card" id="loginSection">
        <h2 style="color: #4f46e5; margin-bottom: 20px; font-size: 1.8rem; text-align: center;"> Connect Your Gmail</h2>
        <p style="text-align: center; margin-bottom: 25px; color: #6b7280; font-size: 1.1rem;">
          Get organized insights about your emails while maintaining complete privacy
        </p>
        
        <div class="button-group">
          <button id="gmailLoginBtn" class="button" disabled>Connect Gmail Account</button>
        </div>
        
        <p style="font-size: 14px; color: #9ca3af; text-align: center; margin-top: 15px;">
           We only access what you authorize and never store your emails.
        </p>
      </div>
      
      <!-- User Section -->
      <div class="card user-info" id="userSection" style="display: none;">
        <h2> Connected Successfully!</h2>
        <p id="userInfo" style="color: #059669; font-weight: 500; margin-bottom: 20px;"></p>
        
        <div class="button-group">
          <button id="fetchEmailsBtn" class="button success"> View My Emails</button>
          <button id="logoutBtn" class="button secondary"> Sign Out</button>
        </div>
      </div>

      <!-- Email Display Section -->
      <div class="card" id="emailSection" style="display: none;">
        <h2 style="color: #059669; margin-bottom: 20px; font-size: 1.8rem; text-align: center;"> Your Latest Emails</h2>
        <div id="emailList" class="email-list">
          <!-- Email items will be dynamically added here -->
        </div>
      </div>

      <!-- OAuth Info Section -->
      <div class="card oauth-info" style="display: none;">
        <h3 style="color: #92400e; margin-bottom: 15px; font-size: 1.2rem;"> Local Testing Info</h3>
        <p style="color: #a16207; font-size: 0.9rem; line-height: 1.5; margin-bottom: 10px;">
          If you see "Access blocked" errors, this is normal for localhost testing. Google OAuth requires HTTPS for security.
        </p>
        <p style="color: #a16207; font-size: 0.9rem; line-height: 1.5;">
          The app will automatically switch to <strong>demo mode</strong> to showcase the UI and functionality.
        </p>
      </div>
    </div>
  </div>

  <!-- Hidden elements for fallback functionality -->
  <div style="display: none;">
    <div id="currentUrlForCopy"></div>
  </div>

  <!-- Google APIs -->
  <script src="https://accounts.google.com/gsi/client"></script>
  
  <script>
    // Simplified logging for production (no visible debug info)
    function log(message, type = 'info') {
      console.log(`[${new Date().toLocaleTimeString()}] ${message}`);
    }

    // Clean status updates (no technical details)
    function updateStatusIndicators() {
      // Silent status tracking without showing technical details to users
    }

    // Fallback browser handling (silent)
    function handleBrowserCompatibility() {
      const isVSCodeBrowser = navigator.userAgent.includes('VSCode') || 
                              window.location.protocol === 'vscode-webview:' ||
                              window.acquireVsCodeApi !== undefined;
      
      if (isVSCodeBrowser) {
        // Silently handle VS Code browser limitations
        setupFallbackAuth();
        return true;
      }
      return false;
    }

    // URL helpers (silent fallback)
    function openInSystemBrowser() {
      const url = window.location.href;
      window.open(url, '_blank');
    }

    function copyUrl() {
      const url = window.location.href;
      navigator.clipboard.writeText(url).catch(() => {
        const textArea = document.createElement('textarea');
        textArea.value = url;
        document.body.appendChild(textArea);
        textArea.select();
        document.execCommand('copy');
        document.body.removeChild(textArea);
      });
    }

    // Google OAuth Configuration
    //  Updated with actual Client ID from Google Cloud Console
    const CLIENT_ID = '84130778618-r0g9lndnhbemlfmj2n1drhdleripaglm.apps.googleusercontent.com';
    const SCOPES = 'https://www.googleapis.com/auth/gmail.readonly email profile';

    let tokenClient;

    // Initialize Google Identity Services
    function initializeGoogleAuth() {
      try {
        tokenClient = google.accounts.oauth2.initTokenClient({
          client_id: CLIENT_ID,
          scope: SCOPES,
          callback: handleAuthCallback,
        });
        
        log('Google OAuth initialized successfully');
        document.getElementById('gmailLoginBtn').disabled = false;
        document.getElementById('gmailLoginBtn').textContent = 'Connect Gmail Account';
      } catch (error) {
        log(`Google OAuth initialization failed: ${error.message}`);
        setupFallbackAuth();
      }
    }

    function setupFallbackAuth() {
      log('Setting up fallback OAuth flow');
      document.getElementById('gmailLoginBtn').onclick = () => {
        const oauthUrl = `https://accounts.google.com/oauth/authorize?` +
          `client_id=${CLIENT_ID}&` +
          `redirect_uri=${encodeURIComponent(window.location.origin + window.location.pathname)}&` +
          `scope=${encodeURIComponent(SCOPES)}&` +
          `response_type=token&` +
          `include_granted_scopes=true&` +
          `state=gmail_auth`;
        
        log('Redirecting to Google OAuth');
        window.location.href = oauthUrl;
      };
      document.getElementById('gmailLoginBtn').disabled = false;
      document.getElementById('gmailLoginBtn').textContent = 'Connect Gmail Account';
    }

    function handleGoogleLogin() {
      try {
        log('Starting Gmail authentication');
        document.getElementById('gmailLoginBtn').innerHTML = '<span class="loading-spinner"></span> Connecting...';
        document.getElementById('gmailLoginBtn').disabled = true;
        
        tokenClient.requestAccessToken({
          prompt: 'consent'
        });
      } catch (error) {
        log(`Login failed: ${error.message}`);
        handleOAuthError(error.message);
        
        // For VS Code browser or other issues, show helpful message
        if (handleBrowserCompatibility()) {
          showNotification(' Please open this page in your regular browser (Chrome, Firefox, Safari, or Edge) to connect your Gmail account.', 'info');
        }
      }
    }

    function handleAuthCallback(response) {
      if (response.error) {
        log(`OAuth error: ${response.error}`);
        handleOAuthError(response.error);
        return;
      }

      if (response.access_token) {
        log('Access token received successfully');
        window.gmailAccessToken = response.access_token;
        
        // Get user info and show user section
        getUserInfo(response.access_token);
        showUserSection();
        
        log('Gmail authentication successful');
        showNotification(' Successfully connected to Gmail!', 'success');
      } else {
        log('No access token in response');
        handleOAuthError('no_access_token');
      }
    }

    async function getUserInfo(accessToken) {
      try {
        const response = await fetch('https://www.googleapis.com/oauth2/v2/userinfo', {
          headers: {
            'Authorization': `Bearer ${accessToken}`
          }
        });

        if (response.ok) {
          const userInfo = await response.json();
          document.getElementById('userInfo').textContent = `Welcome back, ${userInfo.name}!  ${userInfo.email}`;
          log(`User authenticated: ${userInfo.name} (${userInfo.email})`);
        }
      } catch (error) {
        log(`Could not fetch user info: ${error.message}`);
        document.getElementById('userInfo').textContent = 'Successfully connected to Gmail! ';
      }
    }

    // Gmail API Functions
    async function fetchGmailMessages() {
      if (!window.gmailAccessToken) {
        showNotification(' Please connect your Gmail account first.', 'warning');
        return;
      }

      // Handle demo mode
      if (window.gmailAccessToken === 'demo_token') {
        document.getElementById('fetchEmailsBtn').innerHTML = '<span class="loading-spinner"></span> Loading...';
        document.getElementById('fetchEmailsBtn').disabled = true;
        document.getElementById('emailSection').style.display = 'block';
        
        // Show loading state
        const emailList = document.getElementById('emailList');
        emailList.innerHTML = `
          <div style="text-align: center; color: #6b7280; padding: 40px;">
            <div style="font-size: 2rem; margin-bottom: 15px; animation: bounce 1s ease-in-out infinite;"></div>
            <div class="loading-spinner" style="margin: 0 auto 15px;"></div>
            <div>Loading demo emails...</div>
            <div class="status-indicator loading" style="margin-top: 15px;">
              <span class="pulse-dot"></span>
              Fetching latest messages
            </div>
          </div>
        `;
        
        // Simulate loading delay
        setTimeout(() => {
          showDemoEmails();
          document.getElementById('fetchEmailsBtn').innerHTML = ' View My Emails';
          document.getElementById('fetchEmailsBtn').disabled = false;
        }, 2000);
        
        return;
      }

      try {
        log('Fetching Gmail messages');
        
        // Show enhanced loading state
        const emailList = document.getElementById('emailList');
        emailList.innerHTML = `
          <div style="text-align: center; color: #6b7280; padding: 40px;">
            <div style="font-size: 2rem; margin-bottom: 15px; animation: bounce 1s ease-in-out infinite;"></div>
            <div class="loading-spinner" style="margin: 0 auto 15px;"></div>
            <div>Loading your emails...</div>
            <div class="status-indicator loading" style="margin-top: 15px;">
              <span class="pulse-dot"></span>
              Fetching latest messages
            </div>
          </div>
        `;
        document.getElementById('emailSection').style.display = 'block';
        document.getElementById('fetchEmailsBtn').innerHTML = '<span class="loading-spinner"></span> Loading...';
        document.getElementById('fetchEmailsBtn').disabled = true;
        
        const response = await fetch('https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=5', {
          headers: {
            'Authorization': `Bearer ${window.gmailAccessToken}`,
            'Content-Type': 'application/json'
          }
        });

        if (!response.ok) {
          const errorText = await response.text();
          throw new Error(`Gmail API Error: ${response.status} ${response.statusText}`);
        }

        const data = await response.json();
        
        if (data.messages && data.messages.length > 0) {
          log(`Found ${data.messages.length} messages`);
          
          // Fetch details for all messages
          const emailPromises = data.messages.map(message => fetchMessageDetails(message.id));
          const emailDetails = await Promise.all(emailPromises);
          
          // Display emails
          displayEmails(emailDetails.filter(email => email !== null));
          
        } else {
          log('No messages found');
          emailList.innerHTML = `
            <div class="no-emails">
              <div style="font-size: 3rem; margin-bottom: 15px;"></div>
              <div style="font-size: 1.2rem; color: #6b7280;">No emails found</div>
              <div style="font-size: 0.9rem; color: #9ca3af; margin-top: 8px;">Your inbox appears to be empty</div>
            </div>
          `;
        }
      } catch (error) {
        log(`Gmail fetch error: ${error.message}`);
        
        const emailList = document.getElementById('emailList');
        emailList.innerHTML = `
          <div class="no-emails">
            <div style="font-size: 2rem; margin-bottom: 15px;"></div>
            <div style="font-size: 1.1rem; color: #ef4444;">Unable to load emails</div>
            <div style="font-size: 0.9rem; color: #6b7280; margin-top: 8px;">Please try again or check your connection</div>
          </div>
        `;
        
        // Show error notification
        showNotification(' Failed to load emails. Please try again.', 'error');
        
        if (error.message.includes('401')) {
          showNotification(' Session expired. Please sign in again.', 'warning');
          setTimeout(() => handleLogout(), 2000);
        }
      } finally {
        document.getElementById('fetchEmailsBtn').innerHTML = ' View My Emails';
        document.getElementById('fetchEmailsBtn').disabled = false;
        
        // Show success notification
        showNotification(' Emails loaded successfully!', 'success');
      }
    }

    async function fetchMessageDetails(messageId) {
      try {
        log(`Fetching details for message: ${messageId}`);
        
        const response = await fetch(`https://gmail.googleapis.com/gmail/v1/users/me/messages/${messageId}`, {
          headers: {
            'Authorization': `Bearer ${window.gmailAccessToken}`,
            'Content-Type': 'application/json'
          }
        });

        if (response.ok) {
          const messageData = await response.json();
          const headers = messageData.payload?.headers || [];
          const subject = headers.find(h => h.name === 'Subject')?.value || 'No subject';
          const from = headers.find(h => h.name === 'From')?.value || 'Unknown sender';
          const date = headers.find(h => h.name === 'Date')?.value || '';
          
          return {
            id: messageId,
            subject,
            from,
            date,
            snippet: messageData.snippet || 'No preview available',
            labels: messageData.labelIds || []
          };
        }
      } catch (error) {
        log(`Error fetching message details: ${error.message}`);
        return null;
      }
    }

    function displayEmails(emails) {
      const emailList = document.getElementById('emailList');
      
      if (emails.length === 0) {
        emailList.innerHTML = '<div class="no-emails"> No email details could be loaded.</div>';
        return;
      }
      
      emailList.innerHTML = emails.map(email => {
        const fromParts = email.from.match(/^(.*?)\s*<(.+)>$/) || [null, email.from, email.from];
        const fromName = fromParts[1] || fromParts[2];
        const fromEmail = fromParts[2] || email.from;
        
        // Format date
        let formattedDate = 'Unknown date';
        try {
          const dateObj = new Date(email.date);
          formattedDate = dateObj.toLocaleDateString() + ' ' + dateObj.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
        } catch (e) {
          formattedDate = email.date;
        }
        
        // Determine priority based on labels
        let priorityClass = '';
        if (email.labels.includes('IMPORTANT')) priorityClass = 'high';
        else if (email.labels.includes('CATEGORY_PROMOTIONS')) priorityClass = 'medium';
        
        // Create label badges
        const labelBadges = email.labels
          .filter(label => !['INBOX', 'UNREAD', 'IMPORTANT'].includes(label))
          .slice(0, 3) // Limit to 3 labels
          .map(label => `<span class="email-label">${label.toLowerCase().replace('category_', '')}</span>`)
          .join('');
        
        return `
          <div class="email-item fade-in">
            ${priorityClass ? `<div class="email-priority ${priorityClass}"></div>` : ''}
            <div class="email-header">
              <h3 class="email-subject">${email.subject}</h3>
              <div class="email-date">${formattedDate}</div>
            </div>
            <div class="email-from"> ${fromName}</div>
            <p class="email-snippet">${email.snippet}</p>
            ${labelBadges ? `<div class="email-labels">${labelBadges}</div>` : ''}
          </div>
        `;
      }).join('');
    }

    // Utility functions for enhanced UI
    function showNotification(message, type = 'info') {
      const toast = document.createElement('div');
      toast.className = `toast ${type}`;
      toast.innerHTML = `
        <div style="display: flex; align-items: center; gap: 10px;">
          <span style="font-size: 1.2rem;">${getNotificationIcon(type)}</span>
          <span>${message}</span>
        </div>
      `;
      
      document.body.appendChild(toast);
      
      // Auto-remove after 4 seconds
      setTimeout(() => {
        toast.style.animation = 'slide-out 0.3s ease-in forwards';
        setTimeout(() => document.body.removeChild(toast), 300);
      }, 4000);
    }

    function getNotificationIcon(type) {
      switch(type) {
        case 'success': return '';
        case 'error': return '';
        case 'warning': return '';
        default: return '';
      }
    }

    function addFloatingActionButton() {
      const fab = document.createElement('button');
      fab.className = 'fab';
      fab.innerHTML = '';
      fab.title = 'Back to top';
      fab.onclick = () => window.scrollTo({ top: 0, behavior: 'smooth' });
      
      document.body.appendChild(fab);
      
      // Show FAB when scrolling
      window.addEventListener('scroll', () => {
        if (window.scrollY > 300) {
          fab.classList.add('show');
        } else {
          fab.classList.remove('show');
        }
      });
    }

    function addEmailClickHandlers() {
      document.addEventListener('click', (e) => {
        if (e.target.closest('.email-item')) {
          const emailItem = e.target.closest('.email-item');
          const snippet = emailItem.querySelector('.email-snippet');
          
          if (snippet) {
            snippet.style.webkitLineClamp = snippet.style.webkitLineClamp === 'unset' ? '2' : 'unset';
            snippet.style.maxHeight = snippet.style.maxHeight === 'none' ? '2.8em' : 'none';
          }
        }
      });
    }

    function addKeyboardShortcuts() {
      document.addEventListener('keydown', (e) => {
        if (e.key === 'r' && (e.ctrlKey || e.metaKey)) {
          e.preventDefault();
          if (window.gmailAccessToken) {
            document.getElementById('fetchEmailsBtn').click();
          }
        }
      });
    }

    function animateCards() {
      const cards = document.querySelectorAll('.card, .email-item');
      cards.forEach((card, index) => {
        card.style.animation = `fadeIn 0.5s ease-in ${index * 0.1}s forwards`;
        card.style.opacity = '0';
      });
    }

    // Initialize enhanced features
    function initializeEnhancedFeatures() {
      addFloatingActionButton();
      addEmailClickHandlers();
      addKeyboardShortcuts();
      
      // Add a subtle welcome message
      setTimeout(() => {
        showNotification('Welcome to MailMind! ', 'info');
      }, 1000);
    }

    // Logout function
    function handleLogout() {
      log('User logging out');
      
      if (window.gmailAccessToken && typeof google !== 'undefined' && google.accounts) {
        // Revoke the token silently
        google.accounts.oauth2.revoke(window.gmailAccessToken, () => {
          log('Token revoked successfully');
        });
      }
      
      window.gmailAccessToken = null;
      showLoginSection();
      
      // Show success notification instead of alert
      showNotification(' Successfully signed out!', 'success');
    }

    // UI Management
    function showLoginSection() {
      document.getElementById('loginSection').style.display = 'block';
      document.getElementById('userSection').style.display = 'none';
      document.getElementById('emailSection').style.display = 'none';
      window.gmailAccessToken = null;
    }

    function showUserSection() {
      document.getElementById('loginSection').style.display = 'none';
      document.getElementById('userSection').style.display = 'block';
    }

    // Check for OAuth callback in URL
    function checkForOAuthCallback() {
      const hash = window.location.hash;
      if (hash.includes('access_token')) {
        log('Found OAuth callback in URL');
        
        const params = new URLSearchParams(hash.substring(1));
        const accessToken = params.get('access_token');
        const state = params.get('state');
        
        if (accessToken && state === 'gmail_auth') {
          log('OAuth callback successful');
          window.gmailAccessToken = accessToken;
          getUserInfo(accessToken);
          showUserSection();
          
          // Clean up URL
          window.history.replaceState({}, document.title, window.location.pathname);
        }
      }
    }

    // Enhanced error handling for OAuth issues
    function handleOAuthError(error) {
      log(`OAuth Error: ${error}`);
      
      // Show user-friendly error message
      if (error.includes('access_blocked') || error.includes('redirect_uri_mismatch')) {
        showNotification(' OAuth access blocked. This is normal for localhost testing.', 'warning');
        
        // Show demo mode
        setTimeout(() => {
          showDemoMode();
        }, 2000);
      } else if (error.includes('popup_blocked')) {
        showNotification(' Please allow popups for this site and try again.', 'warning');
      } else {
        showNotification(' Authentication failed. Please try again.', 'error');
      }
      
      // Reset button state
      document.getElementById('gmailLoginBtn').innerHTML = 'Connect Gmail Account';
      document.getElementById('gmailLoginBtn').disabled = false;
    }

    // Demo mode for local testing
    function showDemoMode() {
      showNotification(' Switching to demo mode for local testing...', 'info');
      
      // Simulate successful login
      setTimeout(() => {
        window.gmailAccessToken = 'demo_token';
        document.getElementById('userInfo').innerHTML = `
          <div class="status-indicator success">
            <span class="pulse-dot"></span>
            Demo Mode Active - John Doe (demo@example.com)
          </div>
        `;
        showUserSection();
        showNotification(' Demo mode activated!', 'success');
      }, 1500);
    }

    // Enhanced demo email data
    function showDemoEmails() {
      const demoEmails = [
        {
          id: 'demo1',
          subject: ' Weekly Team Standup - Important Updates',
          from: 'Sarah Johnson <sarah.johnson@company.com>',
          date: new Date(Date.now() - 1000 * 60 * 30).toISOString(), // 30 minutes ago
          snippet: 'Hi team! Here are the key updates from this week: Project Alpha is on track, we\'ve resolved the deployment issues, and the new feature rollout is scheduled for next Monday. Please review the attached documents before our meeting.',
          labels: ['IMPORTANT', 'CATEGORY_UPDATES']
        },
        {
          id: 'demo2',
          subject: ' Your Monthly Newsletter - Tech Trends',
          from: 'TechNews Daily <newsletter@technews.com>',
          date: new Date(Date.now() - 1000 * 60 * 60 * 2).toISOString(), // 2 hours ago
          snippet: 'This month\'s highlights: AI breakthroughs in healthcare, the latest JavaScript frameworks, cybersecurity best practices, and upcoming conferences you shouldn\'t miss.',
          labels: ['CATEGORY_PROMOTIONS', 'NEWSLETTER']
        },
        {
          id: 'demo3',
          subject: ' Project Milestone Achieved!',
          from: 'Project Manager <pm@company.com>',
          date: new Date(Date.now() - 1000 * 60 * 60 * 4).toISOString(), // 4 hours ago
          snippet: 'Congratulations team! We\'ve successfully completed Phase 1 of the project. The client is extremely happy with the results. Next steps include user testing and final deployment preparations.',
          labels: ['IMPORTANT', 'PROJECT']
        },
        {
          id: 'demo4',
          subject: ' Feature Request from Beta Users',
          from: 'Community Manager <community@company.com>',
          date: new Date(Date.now() - 1000 * 60 * 60 * 6).toISOString(), // 6 hours ago
          snippet: 'Our beta users have submitted some fantastic feature requests. The most popular ones include dark mode, advanced search filters, and mobile app improvements. Let\'s discuss these in our next planning session.',
          labels: ['FEEDBACK', 'BETA']
        },
        {
          id: 'demo5',
          subject: ' Welcome to the Team!',
          from: 'HR Department <hr@company.com>',
          date: new Date(Date.now() - 1000 * 60 * 60 * 8).toISOString(), // 8 hours ago
          snippet: 'Welcome to our new team member, Alex Chen! Alex will be joining us as a Senior Frontend Developer. Please join us for a virtual welcome meeting this Friday at 3 PM.',
          labels: ['ANNOUNCEMENT', 'TEAM']
        }
      ];

      displayEmails(demoEmails);
      showNotification(' Demo emails loaded!', 'success');
    }
    
    // Initialize everything
    document.addEventListener('DOMContentLoaded', () => {
      log('MailMind initializing');
      
      // Set current URL for copying (hidden from users)
      document.getElementById('currentUrlForCopy').textContent = window.location.href;
      
      // Check for OAuth callback first
      checkForOAuthCallback();
      
      // Initialize enhanced features
      initializeEnhancedFeatures();
      
      // Show connecting state initially
      document.getElementById('gmailLoginBtn').disabled = true;
      document.getElementById('gmailLoginBtn').textContent = 'Connecting...';
      
      // Initialize Google OAuth when available
      if (typeof google !== 'undefined') {
        initializeGoogleAuth();
      } else {
        // Wait for Google script to load
        const checkGoogle = setInterval(() => {
          if (typeof google !== 'undefined') {
            clearInterval(checkGoogle);
            initializeGoogleAuth();
          }
        }, 100);
        
        // Fallback after 5 seconds
        setTimeout(() => {
          if (document.getElementById('gmailLoginBtn').disabled) {
            log('Google OAuth library not available, using fallback');
            setupFallbackAuth();
          }
        }, 5000);
      }

      // Event listeners
      document.getElementById('gmailLoginBtn').addEventListener('click', handleGoogleLogin);
      document.getElementById('fetchEmailsBtn').addEventListener('click', fetchGmailMessages);
      document.getElementById('logoutBtn').addEventListener('click', handleLogout);

      log('Initialization complete');
    });
  </script>
</body>
</html>
